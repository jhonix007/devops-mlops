# Домашняя работа: Kubernetes (k8s)

## Теоретические вопросы

### 1. Что такое k8s?

Kubernetes (k8s) — это система оркестрации контейнеров, которая автоматически управляет развертыванием, масштабированием и обновлением контейнеризированных приложений в кластере серверов.

---

### 2. В чём преимущество контейнеризации над виртуализацией?

* Контейнеры легче и потребляют меньше ресурсов, чем виртуальные машины (нет отдельной гостевой ОС).
* Быстрый запуск и остановка контейнеров.
* Упаковка приложения вместе со всеми зависимостями — «один образ, одинаковое поведение везде».
* Более высокая плотность размещения приложений на тех же ресурсах.

---

### 3. В чём состоит принцип самоконтроля k8s (self-healing)?

В Kubernetes мы описываем **желаемое состояние** (desired state) в манифестах: количество реплик, образ, порты и т.д.  
Контроллеры Kubernetes постоянно сравнивают текущее состояние кластера с желаемым и:

* перезапускают упавшие Pod’ы;
* пересоздают контейнеры, не прошедшие проверки живости/готовности;
* создают недостающие реплики;
* пересоздают поды на других нодах, если нода недоступна.

Так кластер «сам себя подлечивает».

---

### 4. Зачем понимать принципы деплоя в k8s?

* Чтобы уметь самостоятельно разворачивать свои приложения (в том числе ML/DS-сервисы) в продовой инфраструктуре.
* Чтобы понимать, как устроен CI/CD, и уметь вносить изменения в пайплайны.
* Чтобы быстрее находить и устранять проблемы в проде (понимать, на каком уровне сломалось: Pod, Deployment, Service и т.д.).

---

### 5. Какое средство управления секретами чаще всего используют с k8s?

Самый базовый и распространённый механизм — это **Kubernetes Secrets** (ресурс `Secret`).  
Из внешних решений часто используют **HashiCorp Vault**, но «по умолчанию» в кластерах обычно начинают именно с Kubernetes Secrets.

---

### 6. Какие типы нод есть в k8s, каковы их базовые функции?

**Control plane (master) ноды:**

* Хранят состояние кластера (etcd).
* Предоставляют API (`kube-apiserver`).
* Планируют поды на воркерах (`kube-scheduler`).
* Управляют контроллерами (`kube-controller-manager` и др.).

**Worker (рабочие) ноды:**

* Непосредственно запускают контейнеры в Pod’ах.
* На каждой ноде работают:
  * `kubelet` — агент, управляющий подами и контейнерами,
  * `kube-proxy` — сетевые правила и проксирование,
  * контейнерный runtime (Docker, containerd и т.п.).

---

## Kubernetes-манифест


```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: netology-ml
spec:
  replicas: 2
  selector:
    matchLabels:
      app: netology-ml
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
      maxSurge: 1
  template:
    metadata:
      labels:
        app: netology-ml
    spec:
      containers:
        - name: tomcat
          image: tomcat:8.5.69-jdk8-corretto
          ports:
            - containerPort: 8080